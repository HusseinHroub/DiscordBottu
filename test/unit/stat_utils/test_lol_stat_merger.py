import unittest

from statsUtils import lolStatsMerger


class MyTestCase(unittest.TestCase):
    def test_all_stats_success(self):
        merged_results = lolStatsMerger.mergeGamesStats(self.get_results_data())
        self.assertEqual({
            'total_kills': 5,
            'total_deaths': 8,
            'total_assists': 11,
            'total_farms': 194,
            'avg_kda': 1.9333333333333336,
            'sample_count': 2,
            'wins': 1,
            'loses': 1
        }, merged_results)

    def test_when_death_is_zero(self):
        merged_results = lolStatsMerger.mergeGamesStats(self.get_result_with_zero_death())
        self.assertEqual({
            'total_kills': 4,
            'total_deaths': 0,
            'total_assists': 7,
            'total_farms': 173,
            'avg_kda': 11.0,
            'sample_count': 1,
            'wins': 1,
            'loses': 0
        }, merged_results)

    def get_results_data(self):
        return [{
            "participantId": 7,
            "win": True,
            "item0": 1055,
            "item1": 6672,
            "item2": 3006,
            "item3": 3124,
            "item4": 0,
            "item5": 0,
            "item6": 3363,
            "kills": 4,
            "deaths": 5,
            "assists": 7,
            "largestKillingSpree": 3,
            "largestMultiKill": 2,
            "killingSprees": 1,
            "longestTimeSpentLiving": 679,
            "doubleKills": 1,
            "tripleKills": 0,
            "quadraKills": 0,
            "pentaKills": 0,
            "unrealKills": 0,
            "totalDamageDealt": 109805,
            "magicDamageDealt": 0,
            "physicalDamageDealt": 86810,
            "trueDamageDealt": 22994,
            "largestCriticalStrike": 274,
            "totalDamageDealtToChampions": 12363,
            "magicDamageDealtToChampions": 0,
            "physicalDamageDealtToChampions": 8662,
            "trueDamageDealtToChampions": 3700,
            "totalHeal": 6331,
            "totalUnitsHealed": 2,
            "damageSelfMitigated": 7126,
            "damageDealtToObjectives": 17800,
            "damageDealtToTurrets": 7782,
            "visionScore": 17,
            "timeCCingOthers": 4,
            "totalDamageTaken": 14649,
            "magicalDamageTaken": 4506,
            "physicalDamageTaken": 9584,
            "trueDamageTaken": 558,
            "goldEarned": 10051,
            "goldSpent": 7850,
            "turretKills": 1,
            "inhibitorKills": 1,
            "totalMinionsKilled": 153,
            "neutralMinionsKilled": 20,
            "neutralMinionsKilledTeamJungle": 20,
            "neutralMinionsKilledEnemyJungle": 0,
            "totalTimeCrowdControlDealt": 28,
            "champLevel": 14,
            "visionWardsBoughtInGame": 0,
            "sightWardsBoughtInGame": 0,
            "wardsPlaced": 8,
            "wardsKilled": 3,
            "firstBloodKill": False,
            "firstBloodAssist": False,
            "firstTowerKill": False,
            "firstTowerAssist": False,
            "firstInhibitorKill": True,
            "firstInhibitorAssist": False,
            "combatPlayerScore": 0,
            "objectivePlayerScore": 0,
            "totalPlayerScore": 0,
            "totalScoreRank": 0,
            "playerScore0": 0,
            "playerScore1": 0,
            "playerScore2": 0,
            "playerScore3": 0,
            "playerScore4": 0,
            "playerScore5": 0,
            "playerScore6": 0,
            "playerScore7": 0,
            "playerScore8": 0,
            "playerScore9": 0,
            "perk0": 8005,
            "perk0Var1": 1069,
            "perk0Var2": 625,
            "perk0Var3": 443,
            "perk1": 9101,
            "perk1Var1": 865,
            "perk1Var2": 1189,
            "perk1Var3": 0,
            "perk2": 9104,
            "perk2Var1": 18,
            "perk2Var2": 50,
            "perk2Var3": 0,
            "perk3": 8017,
            "perk3Var1": 249,
            "perk3Var2": 0,
            "perk3Var3": 0,
            "perk4": 8139,
            "perk4Var1": 658,
            "perk4Var2": 0,
            "perk4Var3": 0,
            "perk5": 8135,
            "perk5Var1": 2455,
            "perk5Var2": 5,
            "perk5Var3": 0,
            "perkPrimaryStyle": 8000,
            "perkSubStyle": 8100,
            "statPerk0": 5005,
            "statPerk1": 5008,
            "statPerk2": 5003
        },
            {
                "participantId": 7,
                "win": False,
                "item0": 6692,
                "item1": 2031,
                "item2": 3158,
                "item3": 3814,
                "item4": 3053,
                "item5": 0,
                "item6": 3340,
                "kills": 1,
                "deaths": 3,
                "assists": 4,
                "largestKillingSpree": 0,
                "largestMultiKill": 1,
                "killingSprees": 0,
                "longestTimeSpentLiving": 575,
                "doubleKills": 0,
                "tripleKills": 0,
                "quadraKills": 0,
                "pentaKills": 0,
                "unrealKills": 0,
                "totalDamageDealt": 148506,
                "magicDamageDealt": 34916,
                "physicalDamageDealt": 104343,
                "trueDamageDealt": 9246,
                "largestCriticalStrike": 0,
                "totalDamageDealtToChampions": 10109,
                "magicDamageDealtToChampions": 1230,
                "physicalDamageDealtToChampions": 8770,
                "trueDamageDealtToChampions": 108,
                "totalHeal": 12812,
                "totalUnitsHealed": 1,
                "damageSelfMitigated": 29892,
                "damageDealtToObjectives": 13004,
                "damageDealtToTurrets": 1819,
                "visionScore": 16,
                "timeCCingOthers": 14,
                "totalDamageTaken": 36081,
                "magicalDamageTaken": 9858,
                "physicalDamageTaken": 25248,
                "trueDamageTaken": 973,
                "goldEarned": 11064,
                "goldSpent": 10660,
                "turretKills": 1,
                "inhibitorKills": 0,
                "totalMinionsKilled": 20,
                "neutralMinionsKilled": 1,
                "neutralMinionsKilledTeamJungle": 81,
                "neutralMinionsKilledEnemyJungle": 1,
                "totalTimeCrowdControlDealt": 454,
                "champLevel": 16,
                "visionWardsBoughtInGame": 0,
                "sightWardsBoughtInGame": 0,
                "wardsPlaced": 10,
                "wardsKilled": 2,
                "firstBloodKill": False,
                "firstBloodAssist": False,
                "firstTowerKill": False,
                "firstTowerAssist": False,
                "firstInhibitorKill": False,
                "firstInhibitorAssist": False,
                "combatPlayerScore": 0,
                "objectivePlayerScore": 0,
                "totalPlayerScore": 0,
                "totalScoreRank": 0,
                "playerScore0": 0,
                "playerScore1": 0,
                "playerScore2": 0,
                "playerScore3": 0,
                "playerScore4": 0,
                "playerScore5": 0,
                "playerScore6": 0,
                "playerScore7": 0,
                "playerScore8": 0,
                "playerScore9": 0,
                "perk0": 8010,
                "perk0Var1": 20,
                "perk0Var2": 0,
                "perk0Var3": 0,
                "perk1": 9111,
                "perk1Var1": 926,
                "perk1Var2": 340,
                "perk1Var3": 0,
                "perk2": 9105,
                "perk2Var1": 15,
                "perk2Var2": 30,
                "perk2Var3": 0,
                "perk3": 8014,
                "perk3Var1": 181,
                "perk3Var2": 0,
                "perk3Var3": 0,
                "perk4": 8143,
                "perk4Var1": 304,
                "perk4Var2": 0,
                "perk4Var3": 0,
                "perk5": 8135,
                "perk5Var1": 2339,
                "perk5Var2": 5,
                "perk5Var3": 0,
                "perkPrimaryStyle": 8000,
                "perkSubStyle": 8100,
                "statPerk0": 5005,
                "statPerk1": 5008,
                "statPerk2": 5003
            }]

    if __name__ == '__main__':
        unittest.main()

    def get_result_with_zero_death(self):
        return [{
            "participantId": 7,
            "win": True,
            "item0": 1055,
            "item1": 6672,
            "item2": 3006,
            "item3": 3124,
            "item4": 0,
            "item5": 0,
            "item6": 3363,
            "kills": 4,
            "deaths": 0,
            "assists": 7,
            "largestKillingSpree": 3,
            "largestMultiKill": 2,
            "killingSprees": 1,
            "longestTimeSpentLiving": 679,
            "doubleKills": 1,
            "tripleKills": 0,
            "quadraKills": 0,
            "pentaKills": 0,
            "unrealKills": 0,
            "totalDamageDealt": 109805,
            "magicDamageDealt": 0,
            "physicalDamageDealt": 86810,
            "trueDamageDealt": 22994,
            "largestCriticalStrike": 274,
            "totalDamageDealtToChampions": 12363,
            "magicDamageDealtToChampions": 0,
            "physicalDamageDealtToChampions": 8662,
            "trueDamageDealtToChampions": 3700,
            "totalHeal": 6331,
            "totalUnitsHealed": 2,
            "damageSelfMitigated": 7126,
            "damageDealtToObjectives": 17800,
            "damageDealtToTurrets": 7782,
            "visionScore": 17,
            "timeCCingOthers": 4,
            "totalDamageTaken": 14649,
            "magicalDamageTaken": 4506,
            "physicalDamageTaken": 9584,
            "trueDamageTaken": 558,
            "goldEarned": 10051,
            "goldSpent": 7850,
            "turretKills": 1,
            "inhibitorKills": 1,
            "totalMinionsKilled": 153,
            "neutralMinionsKilled": 20,
            "neutralMinionsKilledTeamJungle": 20,
            "neutralMinionsKilledEnemyJungle": 0,
            "totalTimeCrowdControlDealt": 28,
            "champLevel": 14,
            "visionWardsBoughtInGame": 0,
            "sightWardsBoughtInGame": 0,
            "wardsPlaced": 8,
            "wardsKilled": 3,
            "firstBloodKill": False,
            "firstBloodAssist": False,
            "firstTowerKill": False,
            "firstTowerAssist": False,
            "firstInhibitorKill": True,
            "firstInhibitorAssist": False,
            "combatPlayerScore": 0,
            "objectivePlayerScore": 0,
            "totalPlayerScore": 0,
            "totalScoreRank": 0,
            "playerScore0": 0,
            "playerScore1": 0,
            "playerScore2": 0,
            "playerScore3": 0,
            "playerScore4": 0,
            "playerScore5": 0,
            "playerScore6": 0,
            "playerScore7": 0,
            "playerScore8": 0,
            "playerScore9": 0,
            "perk0": 8005,
            "perk0Var1": 1069,
            "perk0Var2": 625,
            "perk0Var3": 443,
            "perk1": 9101,
            "perk1Var1": 865,
            "perk1Var2": 1189,
            "perk1Var3": 0,
            "perk2": 9104,
            "perk2Var1": 18,
            "perk2Var2": 50,
            "perk2Var3": 0,
            "perk3": 8017,
            "perk3Var1": 249,
            "perk3Var2": 0,
            "perk3Var3": 0,
            "perk4": 8139,
            "perk4Var1": 658,
            "perk4Var2": 0,
            "perk4Var3": 0,
            "perk5": 8135,
            "perk5Var1": 2455,
            "perk5Var2": 5,
            "perk5Var3": 0,
            "perkPrimaryStyle": 8000,
            "perkSubStyle": 8100,
            "statPerk0": 5005,
            "statPerk1": 5008,
            "statPerk2": 5003
        }]
